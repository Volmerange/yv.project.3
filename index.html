<html>
<head>
        <meta name="viewport" content="initial-scale=1, maximum-scale=1,
         user-scalable=no, width=device-width">
<style>
#plateau{
	width: 915;
	margin: auto;
}

#Support_bouton{
	width: 320;
	margin: auto;
	background-color: blue;
}

#Reset {
	font-size: 100; 
	font-weight: 12;
	}
	
</style>
</head>
<body>
<div style="height: 220" > </div>
<div id="plateau" > </div>
<div style="height: 180" > </div>
<div id="Support_bouton">
<input id="Reset" type="button" value="Reset" style="width:320; height:160" />

</div>


<script>
var plateau = document.getElementById( 'plateau' );
plateau.innerHTML = ' ';
for ( var n = 0; n < 9; n++ ) {
plateau.innerHTML += '<canvas width="300" height="300" style="background-color:rgba(221, 221, 221, 1); margin:2.5px"> </canvas>';
}
var trous = [];
var trous = document.getElementsByTagName( 'canvas' );
for ( var p = 0; p < 9; p++ ) {
var q = p + 1;
trous[p].id = 'trou' + q;
}
var Reset = document.getElementById( 'Reset' );
var etats = [];
for ( j = 0; j < 9; j++ ) { etats.push( false )}
var contexts = [];
var deplacement = false;
var compteur = 0;
var n = " trou1 ";
var m2;

for ( var i = 0; i < 9; i++ ) {
contexts[i] = trous[i].getContext("2d");
contexts[i].strokeStyle = "black";
contexts[i].beginPath();
contexts[i].arc(150 ,150, 80, 0, Math.PI*2);
contexts[i].stroke();
}




trous[0].addEventListener( 'click', function(e) { 		
	
	if ( (compteur < 6) && ( !deplacement ) ) {
				if ( etats[0] ){
						alert( 'Action impossible => Rejouez' );
						return false;
				}
	}
	
	if ( (compteur > 5) && ( !deplacement ) ) {
				if ( compteur % 2 == 0 ) {
						if ( (contexts[0].fillStyle === "rgba(255, 255, 255, 0.6)") || ( !etats[0] ) ) { 
								alert( 'Action impossible => Rejouez' );
								return false;
						}
				} 	else {
						if ( (contexts[0].fillStyle === "rgba(187, 255, 119, 0.6)") || ( !etats[0] ) ) {			
								alert( 'Action impossible => Rejouez' )
								return false;
						}
					}
		}
		
		if ( !etats[0] ) {					
			if ( compteur % 2 == 0 ) {
			contexts[0].fillStyle = " rgba(187, 255, 119, 0.6) "
			} else { contexts[0].fillStyle = " rgba(255, 255, 255, 0.6) " }
		contexts[0].fill();
		etats[0] = true;
		compteur ++;
			if ( deplacement ) {							
				contexts[ m2 ].fillStyle = " rgba(221, 221, 221, 1) ";
				contexts[ m2 ].fill();
				deplacement = false;
			}
		
		} else {		
		n = e.target.id
		var m1 = n.substr( 4, 1 );
		m2 = parseInt( m1 ) - 1;
		etats[ m2 ] = false;
		deplacement = true;			
		}
		}
		);



trous[1].addEventListener( 'click', function(e) {
 
		if ( (compteur < 6) && ( !deplacement ) ) {
				if ( etats[1] ){
						alert( 'Action impossible => Rejouez' );
						return false;
				}
		}
		
		if ( ( compteur > 5 ) && ( !deplacement ) ) {
				if ( compteur % 2 == 0 ) {
						if ( (contexts[1].fillStyle === "rgba(255, 255, 255, 0.6)") || ( !etats[1] ) ) { 
								alert( 'Action impossible => Rejouez' );
								return false;
						}
				} 	else {
						if ( (contexts[1].fillStyle === "rgba(187, 255, 119, 0.6)") || ( !etats[1] ) ) {			
								alert( 'Action impossible => Rejouez' )
								return false;
						}
					}
		}
		
		if ( !etats[1] ) {		
			if ( compteur % 2 == 0 ) {
			contexts[1].fillStyle = " rgba(187, 255, 119, 0.6) "
			} else { contexts[1].fillStyle = " rgba(255, 255, 255, 0.6) " }		
		contexts[1].fill();
		etats[1] = true;
		compteur ++;		
			if ( deplacement ) {			
			contexts[ m2 ].fillStyle = " rgba(221, 221, 221, 1) ";
			contexts[ m2 ].fill();
			deplacement = false;
			}			
		} else {		
		n = e.target.id		
		var m1 = n.substr( 4, 1 );		
		m2 = parseInt( m1 ) - 1;			
		etats[ m2 ] = false;
		deplacement = true;		
		}
		}
		);



trous[2].addEventListener( 'click', function(e) { 
		
		if ( (compteur < 6) && ( !deplacement ) ) {
				if ( etats[2] ){
						alert( 'Action impossible => Rejouez' );
						return false;
				}
		}
		
		if ( ( compteur > 5 ) && ( !deplacement ) ) {
				if ( compteur % 2 == 0 ) {
						if ( (contexts[2].fillStyle === "rgba(255, 255, 255, 0.6)") || ( !etats[2] ) ) { 
								alert( 'Action impossible => Rejouez' );
								return false;
						}
				} 	else {
						if ( (contexts[2].fillStyle === "rgba(187, 255, 119, 0.6)") || ( !etats[2] ) ) {			
								alert( 'Action impossible => Rejouez' )
								return false;
						}
					}
		}

		if ( !etats[2] ) {				
			if ( compteur % 2 == 0 ) {
			contexts[2].fillStyle = " rgba(187, 255, 119, 0.6) "
			} else { contexts[2].fillStyle = " rgba(255, 255, 255, 0.6) " }
		contexts[2].fill();
		etats[2] = true;
		compteur ++;
			if ( deplacement ) {			
			contexts[ m2 ].fillStyle = " rgba(221, 221, 221, 1) ";
			contexts[ m2 ].fill();
			deplacement = false;
			}		
		} else {		
		n = e.target.id
		var m1 = n.substr( 4, 1 );
		m2 = parseInt( m1 ) - 1;
		etats[ m2 ] = false;
		deplacement = true;		
		}
		}
		);		
		

		
trous[3].addEventListener( 'click', function(e) { 

		if ( (compteur < 6) && ( !deplacement ) ) {
				if ( etats[3] ){
						alert( 'Action impossible => Rejouez' );
						return false;
				}
			}
		
		if ( ( compteur > 5 ) && ( !deplacement ) ) {
				if ( compteur % 2 == 0 ) {
						if ( (contexts[3].fillStyle === "rgba(255, 255, 255, 0.6)") || ( !etats[3] ) ) { 
								alert( 'Action impossible => Rejouez' );
								return false;
						}
				} 	else {
						if ( (contexts[3].fillStyle === "rgba(187, 255, 119, 0.6)") || ( !etats[3] ) ) {			
								alert( 'Action impossible => Rejouez' )
								return false;
						}
					}
		}

		if ( !etats[3] ) {					
			if ( compteur % 2 == 0 ) {
			contexts[3].fillStyle = " rgba(187, 255, 119, 0.6) "
			} else { contexts[3].fillStyle = " rgba(255, 255, 255, 0.6) " }
		contexts[3].fill();
		etats[3] = true;
		compteur ++;
			if ( deplacement ) {			
				contexts[ m2 ].fillStyle = " rgba(221, 221, 221, 1) ";
				contexts[ m2 ].fill();
				deplacement = false;
			}
		
		} else {		
		n = e.target.id
		var m1 = n.substr( 4, 1 );
		m2 = parseInt( m1 ) - 1;
		etats[ m2 ] = false;
		deplacement = true;			
		}
		}
		);

		

trous[4].addEventListener( 'click', function(e) { 

	if ( (compteur < 6) && ( !deplacement ) ) {
				if ( etats[4] ){
						alert( 'Action impossible => Rejouez' );
						return false;
				}
	}

	if ( ( compteur > 5 ) && ( !deplacement ) ) {
				if ( compteur % 2 == 0 ) {
						if ( (contexts[4].fillStyle === "rgba(255, 255, 255, 0.6)") || ( !etats[4] ) ) { 
								alert( 'Action impossible => Rejouez' );
								return false;
						}
				} 	else {
						if ( (contexts[4].fillStyle === "rgba(187, 255, 119, 0.6)") || ( !etats[4] ) ) {			
								alert( 'Action impossible => Rejouez' )
								return false;
						}
					}
		}

		if ( !etats[4] ) {					
			if ( compteur % 2 == 0 ) {
			contexts[4].fillStyle = " rgba(187, 255, 119, 0.6) "
			} else { contexts[4].fillStyle = " rgba(255, 255, 255, 0.6) " }
		contexts[4].fill();
		etats[4] = true;
		compteur ++;
			if ( deplacement ) {			
				contexts[ m2 ].fillStyle = " rgba(221, 221, 221, 1) ";
				contexts[ m2 ].fill();
				deplacement = false;
			}
		
		} else {		
		n = e.target.id
		var m1 = n.substr( 4, 1 );
		m2 = parseInt( m1 ) - 1;
		etats[ m2 ] = false;
		deplacement = true;		
		}
		}
		);


trous[5].addEventListener( 'click', function(e) { 

		if ( (compteur < 6) && ( !deplacement ) ) {
				if ( etats[5] ){
						alert( 'Action impossible => Rejouez' );
						return false;
				}
		}
		
		if ( ( compteur > 5 ) && ( !deplacement ) ) {
				if ( compteur % 2 == 0 ) {
						if ( (contexts[5].fillStyle === "rgba(255, 255, 255, 0.6)") || ( !etats[5] ) ) { 
								alert( 'Action impossible => Rejouez' );
								return false;
						}
				} 	else {
						if ( (contexts[5].fillStyle === "rgba(187, 255, 119, 0.6)") || ( !etats[5] ) ) {			
								alert( 'Action impossible => Rejouez' )
								return false;
						}
					}
		}

		if ( !etats[5] ) {					
			if ( compteur % 2 == 0 ) {
			contexts[5].fillStyle = " rgba(187, 255, 119, 0.6) "
			} else { contexts[5].fillStyle = " rgba(255, 255, 255, 0.6) " }
		contexts[5].fill();
		etats[5] = true;
		compteur ++;
			if ( deplacement ) {			
				contexts[ m2 ].fillStyle = " rgba(221, 221, 221, 1) ";
				contexts[ m2 ].fill();
				deplacement = false;
			}
		
		} else {		
		n = e.target.id
		var m1 = n.substr( 4, 1 );
		m2 = parseInt( m1 ) - 1;
		etats[ m2 ] = false;
		deplacement = true;			
		}
		}
		);
	

trous[6].addEventListener( 'click', function(e) { 

		if ( (compteur < 6) && ( !deplacement ) ) {
				if ( etats[6] ){
						alert( 'Action impossible => Rejouez' );
						return false;
				}
		}
		
		if ( ( compteur > 5 ) && ( !deplacement ) ) {
				if ( compteur % 2 == 0 ) {
						if ( (contexts[6].fillStyle === "rgba(255, 255, 255, 0.6)") || ( !etats[6] ) ) { 
								alert( 'Action impossible => Rejouez' );
								return false;
						}
				} 	else {
						if ( (contexts[6].fillStyle === "rgba(187, 255, 119, 0.6)") || ( !etats[6] ) ) {			
								alert( 'Action impossible => Rejouez' )
								return false;
						}
					}
		}

		if ( !etats[6] ) {					
			if ( compteur % 2 == 0 ) {
			contexts[6].fillStyle = " rgba(187, 255, 119, 0.6) "
			} else { contexts[6].fillStyle = " rgba(255, 255, 255, 0.6) " }
		contexts[6].fill();
		etats[6] = true;
		compteur ++;
			if ( deplacement ) {			
				contexts[ m2 ].fillStyle = " rgba(221, 221, 221, 1) ";
				contexts[ m2 ].fill();
				deplacement = false;
			}
		
		} else {		
		n = e.target.id
		var m1 = n.substr( 4, 1 );
		m2 = parseInt( m1 ) - 1;
		etats[ m2 ] = false;
		deplacement = true;			
		}
		}
		);
		

trous[7].addEventListener( 'click', function(e) {

		if ( (compteur < 6) && ( !deplacement ) ) {
				if ( etats[7] ){
						alert( 'Action impossible => Rejouez' );
						return false;
				}
		}
		
		if ( ( compteur > 5 ) && ( !deplacement ) ) {
				if ( compteur % 2 == 0 ) {
						if ( (contexts[7].fillStyle === "rgba(255, 255, 255, 0.6)") || ( !etats[7] ) ) { 
								alert( 'Action impossible => Rejouez' );
								return false;
						}
				} 	else {
						if ( (contexts[7].fillStyle === "rgba(187, 255, 119, 0.6)") || ( !etats[7] ) ) {			
								alert( 'Action impossible => Rejouez' )
								return false;
						}
					}
		}
 
		if ( !etats[7] ) {					
			if ( compteur % 2 == 0 ) {
			contexts[7].fillStyle = " rgba(187, 255, 119, 0.6) "
			} else { contexts[7].fillStyle = " rgba(255, 255, 255, 0.6) " }
		contexts[7].fill();
		etats[7] = true;
		compteur ++;
			if ( deplacement ) {			
				contexts[ m2 ].fillStyle = " rgba(221, 221, 221, 1) ";
				contexts[ m2 ].fill();
				deplacement = false;
			}
		
		} else {		
		n = e.target.id
		var m1 = n.substr( 4, 1 );
		m2 = parseInt( m1 ) - 1;
		etats[ m2 ] = false;
		deplacement = true;			
		}
		}
		);


trous[8].addEventListener( 'click', function(e) {

	if ( (compteur < 6) && ( !deplacement ) ) {
				if ( etats[8] ){
						alert( 'Action impossible => Rejouez' );
						return false;
				}
	}

	if ( ( compteur > 5 ) && ( !deplacement ) ) {
				if ( compteur % 2 == 0 ) {
						if ( (contexts[8].fillStyle === "rgba(255, 255, 255, 0.6)") || ( !etats[8] ) ) { 
								alert( 'Action impossible => Rejouez' );
								return false;
						}
				} 	else {
						if ( (contexts[8].fillStyle === "rgba(187, 255, 119, 0.6)") || ( !etats[8] ) ) {			
								alert( 'Action impossible => Rejouez' )
								return false;
						}
					}
		}

		if ( !etats[8] ) {					
			if ( compteur % 2 == 0 ) {
			contexts[8].fillStyle = " rgba(187, 255, 119, 0.6) "
			} else { contexts[8].fillStyle = " rgba(255, 255, 255, 0.6) " }
		contexts[8].fill();
		etats[8] = true;
		compteur ++;
			if ( deplacement ) {			
				contexts[ m2 ].fillStyle = " rgba(221, 221, 221, 1) ";
				contexts[ m2 ].fill();
				deplacement = false;
			}
		
		} else {		
		n = e.target.id
		var m1 = n.substr( 4, 1 );
		m2 = parseInt( m1 ) - 1;
		etats[ m2 ] = false;
		deplacement = true;			
		}
		}
		);
		
Reset.addEventListener( "click", function() {
for ( var k = 0; k < 9; k++ ) {
contexts[k] = trous[k].getContext("2d");
contexts[k].fillStyle = " rgba(221, 221, 221, 1) ";		
contexts[k].fill();
contexts[k].strokeStyle = "grey";
contexts[k].beginPath();
contexts[k].arc(150 ,150, 80, 0, Math.PI*2);
contexts[k].stroke();
etats[ k ] = false;
compteur = 0;
}	
}
)




</script>

</body>
</html>